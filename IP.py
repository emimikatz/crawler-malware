#!/usr/bin/env python
# -*- coding:utf-8 -*-
import requests
import json
import socket
import re

#Entrer une addresse IP ou un nom de domaine
input = input("IP or Domain:")

#Verifier cela est une addresse IP ou pas
compile_rule = re.compile(r'(?<![\.\d])(?:\d{1,3}\.){3}\d{1,3}(?![\.\d])')
match = re.match(compile_rule, input)

#Si cela est une addresse IP
if match:
	ip = match.group()

#Si cela est un nom de domaine 
else:
	ip = socket.getaddrinfo(input, 'http')[0][4][0]

#A l aide du site ipstack, lire les donnÃ©es de cette addresse

url = 'http://api.ipstack.com/' + ip + '?access_key=e6a3ede819d3ad62756729a80e186221'
a = requests.get(url)
data = a.json()
country_name = data.get('country_name')
print("Country name:%s" % country_name)


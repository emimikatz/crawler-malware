#!/usr/bin/env python
# -*- coding:utf-8 -*-
import requests
import json
import socket
import re

#Entrer une addresse IP ou un nom de domaine
input = input("IP or Domain:")

#Mofication Parser url et recuperer la partie essentiel pour analyser apres
compile_rule1 = re.compile('^(?:http:\/\/|www\.|https:\/\/)([^\/]+)')
match1 = re.match(compile_rule1, input)


#Verifier cela est une addresse IP ou pas
compile_rule = re.compile(r'(?<![\.\d])(?:\d{1,3}\.){3}\d{1,3}(?![\.\d])')
match = re.match(compile_rule, match1.group(1))

#Si cela est une addresse IP
if match:
        ip = match.group()

#Si cela est un nom de domaine
else:
        ip = socket.getaddrinfo(match1.group(1), 'http')[0][4][0]

#A l aide du site ipstack, lire les donnÃ©es de cette addresse

url = 'http://api.ipstack.com/' + ip + '?access_key=e6a3ede819d3ad62756729a80e186221'
a = requests.get(url)
data = a.json()
country_name = data.get('country_name')
print("Country name:%s" % country_name)

